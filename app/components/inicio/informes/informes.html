<div class="container">
  <section class="section-informes">
    <div class="row">
      <div class="col s12 m9">
        <div class="wrap-resume">
          <div class="content-informes">
            <div class="card animated fadeInUp hoverable">
              <div class="card-header">
                <h4>Informes</h4>
              </div> 
              <div class="card-content">
                <form class="col s12" ng-submit="$ctrl.getInformes()" name="informesForm">
                  <div class="row">
                    <div class="input-field wrap-search col s12 m12 l5">
                      <i class="material-icons prefix">date_range</i>
                      <input id="desde" type="text" class="datepicker" ng-model="$ctrl.Busqueda.fecha_desde" required>
                      <label for="desde">Desde</label>
                    </div>    
                    <div class="input-field wrap-search col s12 m12 l5">
                      <i class="material-icons prefix">date_range</i>
                      <input id="hasta" type="text" class="datepicker" ng-model="$ctrl.Busqueda.fecha_hasta" required>
                      <label for="hasta">Hasta</label>
                    </div> 
                    <div class="input-field wrap-search col s12 m12 l2">
                      <button class="btn btn-create waves-effect" type="submit" ng-class="{'disabled': informesForm.$invalid}" ng-disabled="informesForm.$invalid">
                        <i class="material-icons">search</i>
                      </button>
                    </div>
                  </div>
                  <div class="col s12 animated fadeIn wrap-results">
                    <p ng-hide="$ctrl.Informes.data.length > 0">No hay resultados</p>
                    <p ng-show="$ctrl.Informes.data.length > 0"><span>{{$ctrl.Informes.data.length}}</span> resultados</p>
                    <div class="card hoverable" ng-show="$ctrl.Informes.data.length > 0">
                      <table class="bordered highlight responsive-table">
                        <thead>
                          <tr>
                            <th data-field="nombre">Mascota</th>
                            <th data-field="texto">Vacuna</th>
                            <th data-field="created">Fecha</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr ng-repeat="Informe in $ctrl.Informes.data">
                            <td class="first-uppercase">
                              {{Informe.pet.nombre}}
                            </td>
                            <td>
                              {{Informe.proxima_vacuna}}                  
                            </td>
                            <td>
                              <i class="material-icons left">query_builder</i>
                              {{Informe.proxima_fecha | date:"dd/MM/yyyy"}}
                            </td>
                          </tr>
                        </tbody>
                      </table>
                      <a class="btn btn-create waves-effect" ng-click="$ctrl.getLetters()">Generar cartas</a>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div> 
      </div>
    </div>
  </section>
</div>

<!--Cartas-->
<div id="letters" style="display: none;">
  <div ng-repeat="Carta in $ctrl.Informes.data">
    <div>
      <h4>{{Carta.pet.owner.nombre | uppercase}}</h4>
      <h5>{{Carta.pet.owner.direccion}}</h5>
      <h5>{{Carta.pet.owner.poblacion}}</h5>
      <h5>{{Carta.pet.owner.provincia}}</h5>
      <h5>{{Carta.pet.owner.cp}}</h5>
    </div>
    <div>
      <p>
        Estimado propietario de <span>{{Carta.pet.nombre | uppercase}}</span>,<br><br>
        Le indicamos que el próximo <span>{{Carta.proxima_fecha | date:"dd/MM/yyyy"}}</span> es necesario aplicar a su mascota la vacuna <span>{{Carta.proxima_vacuna}}</span>.<br><br>
        Por lo que rogamos se ponga en contacto con nosotros a través del teléfono 999.111.111 o al email clinica@clinica.com para concertar su cita.<br><br><br><br>
        Un cordial saludo.
      </p>
    </div>
    <span>En Gijón a {{$ctrl.getCurrentDate()}}</span>
    <br><br><br><br><br><br><br><br><br><br>
  </div>
</div> 




